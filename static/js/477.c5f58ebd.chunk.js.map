{"version":3,"file":"static/js/477.c5f58ebd.chunk.js","mappings":"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","sources":["routers/cart.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Form from \"@rjsf/core\";\r\nimport './Myform.css'; // Import file CSS\r\nimport  validator from '@rjsf/validator-ajv8';\r\nimport * as Realm from 'realm-web';\r\n\r\n\r\nconst MyForm = () => {\r\n  const app = new Realm.App({ id: process.env.REACT_APP_KEY });\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const [jsonSchema, setjsonSchema] = useState([]);\r\n  const [uiSchema, setuiSchema] = useState([]);\r\n  const [price, setPrice]= useState([])\r\nconst [jsonSchema2 ,setjsonSchema2] = useState([]);\r\n const [uiSchema2, setuiSchema2] = useState([]);\r\n const [loading, setLoading] = useState(true);\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n  const fetchData = async () => {\r\n    try {\r\n      const functionName = \"form\";\r\n      const findCart = await app.currentUser.callFunction(functionName,app.currentUser.id);\r\n      setProducts(findCart[0]?.public?.input?.jsonData)\r\n      setjsonSchema(findCart[0]?.public?.input?.jsonSchema)\r\n      setuiSchema(findCart[0]?.public?.input?.uiSchema)\r\n     setjsonSchema2(findCart[0]?.public?.output?.jsonSchema)\r\n     setuiSchema2(findCart[0]?.public?.output?.uiSchema)\r\n    setPrice(findCart[0]?.public?.output?.jsonData)\r\n    setLoading(false);\r\n    \r\n\r\n   \r\n\r\n \r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n  const onSubmit = async ({ formData }) => {\r\n  \r\n    const functionName = \"updateCart\";\r\n    const args=[app.currentUser.id, formData?.products]\r\n    try {\r\n   await app.currentUser.callFunction(functionName, ...args);\r\n\r\n  \r\n      fetchData();\r\n       // Handle form submission logic here\r\n    } catch (error) {\r\n      const errorMessage = error.error;\r\n      const uppercasedErrorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n    alert(uppercasedErrorMessage);\r\n    }\r\n\r\n  };\r\n  const onChange =  async ({ formData }) => {\r\n  //   console.log(\"Form data submitted:\", formData?.products);\r\n    const functionName = \"updateCart\";\r\n    const args=[app.currentUser.id, formData?.products]\r\n    try {\r\n      \r\n      \r\n   await app.currentUser.callFunction(functionName, ...args);\r\n\r\n   console.log(formData.products)\r\n  } catch (error) {\r\n    const errorMessage = error.error;\r\n    const uppercasedErrorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n  alert(uppercasedErrorMessage);\r\n  }\r\n  \r\n  };\r\n  const onSubmit2 = async ( ) => {\r\n    const user= await app.currentUser.refreshCustomData()\r\n\r\n    const functionName = \"ToTempCart\";\r\n    const args=[app.currentUser.customData ,user.cart]\r\n    try {\r\n      \r\n   await app.currentUser.callFunction(functionName, ...args);\r\n  \r\n      fetchData();\r\n       // Handle form submission logic here\r\n    } catch (error) {\r\n      const errorMessage = error.error;\r\n      const uppercasedErrorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n    alert(uppercasedErrorMessage);\r\n    }\r\n\r\n  };\r\n  // const jsonSchema22 = {\r\n    \r\n \r\n  // \"title\": \"Product Information\",\r\n  // \"type\": \"object\",\r\n  // \"properties\": {\r\n  //   \"products\": {\r\n  //     \"type\": \"array\",\r\n  //     \"title\": \"Sản phẩm\",\r\n  //     \"items\": {\r\n  //       \"type\": \"object\",\r\n  //       \"properties\": {\r\n  //         \"productName\": {\r\n  //           \"type\": \"string\",\r\n  //           \"title\": \"Tên sản phẩm\",\r\n           \r\n  //         },\r\n  //         \"productType\": {\r\n  //           \"type\": \"string\",\r\n  //           \"title\": \"Loại\"\r\n  //         },\r\n  //         \"quantity\": {\r\n  //           \"type\": \"number\",\r\n  //           \"title\": \"Số lượng\",\r\n  //           \"minimum\": 1,\r\n  //           \"maximum\": 10,\r\n  //         },\r\n  //         \"sellingPrice\": {\r\n  //           \"type\": \"number\",\r\n  //           \"title\": \"Giá\"\r\n  //         }\r\n  //       }\r\n  //     }\r\n  //   },\r\n  \r\n    \r\n  // }}\r\n  \r\n  // const uiSchema = {\r\n  //   \"ui:classNames\": \"my-form\",\r\n  //   products: {\r\n  //     \"ui:options\": {\r\n  //       orderable: false,\r\n  //     },\r\n  //     items: {\r\n  //       \"ui:classNames\": \"inline-field\",\r\n  //         productName: { \"ui:options\": {\r\n  //          readonly:true\r\n  //         }},\r\n  //         productType: { \"ui:options\": {\r\n  //           readonly:true\r\n  //          }},\r\n  //          sellingPrice: { \"ui:options\": {\r\n  //           readonly:true\r\n  //          }}\r\n  //     },\r\n  //   },\r\n  //   \"ui:submitButtonOptions\": {\r\n  //     props: {\r\n  //       className: \"sumit\",\r\n  //     },\r\n  //     submitText: \"Tính tiền\",\r\n     \r\n  //   },\r\n  // };\r\n  \r\n  // const jsonSchema2 = {\r\n  //   \"title\": \"TotalPrice\",\r\n  //   \"type\": \"object\",\r\n  //   \"properties\": {\r\n  //     \"totalValue\": {\r\n  //       \"type\": \"number\",\r\n  //       \"title\": \"Tổng thành tiền\"\r\n  //     },\r\n  //     \"items\": {\r\n  //       \"title\": \"Mã giảm giá\",\r\n  //       \"type\": \"array\",\r\n  //       \"items\": {\r\n  //         \"type\": \"object\",\r\n  //         \"anyOf\": [\r\n  //           {\r\n  //             \"properties\": {\r\n  //               \"foo\": {\r\n  //                 \"type\": \"string\"\r\n  //               }\r\n  //             }\r\n  //           },\r\n  //           {\r\n  //             \"properties\": {\r\n  //               \"bar\": {\r\n  //                 \"type\": \"string\"\r\n  //               }\r\n  //             }\r\n  //           }\r\n  //         ]\r\n  //       }\r\n  //     }\r\n  //   },\r\n  //   \"anyOf\": [\r\n  //     {\r\n  //       \"title\": \"Không sử dụng mã giảm giá\",\r\n  //       \"properties\": {\r\n        \r\n  //       }\r\n  //     },\r\n  //     {\r\n  //       \"title\": \"Sử dụng mã giảm giá\",\r\n  //       \"properties\": {\r\n  //         \"discount\": {\r\n  //           \"title\":\"Mã giảm\",\r\n  //           \"enum\": [0.1, 0.2],\r\n  //           \"type\": \"number\"\r\n  //         }\r\n  //       },\r\n  //       \"required\": [\"discount\"]\r\n  //     }\r\n  //   ]\r\n  // };\r\n  \r\n  // const uiSchema2 = {\r\n \r\n  //     totalValue: {\r\n  //       \"ui:classNames\": \"inline-field\",\r\n  //       \"ui:options\": {\r\n  //         orderable: false,\r\n  //         readonly:true\r\n  //       },\r\n  //     },\r\n  //     items:{\r\n  //       \"ui:classNames\": \"inline-field hide\",\r\n   \r\n  //     },\r\n  //     \"ui:submitButtonOptions\": {\r\n  //       props: {\r\n  //         className: \"sumit\",\r\n  //       },\r\n  //       submitText: \"Đặt hàng\",\r\n       \r\n  //     },\r\n  //   };\r\n\r\n  return (\r\n    <>\r\n      {loading ? (\r\n        <div>dong</div>\r\n      ) : (\r\n        <>\r\n          <Form\r\n            className='my-form'\r\n            formData={products}\r\n            validator={validator}\r\n            schema={jsonSchema}\r\n            uiSchema={uiSchema}\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n          />\r\n       \r\n           {price.totalValue===0 ? (\r\n          <></>\r\n        ) : (\r\n          <Form\r\n          className='my-form'\r\n          validator={validator}\r\n          schema={jsonSchema2}\r\n          uiSchema={uiSchema2}\r\n          formData={price}\r\n          onSubmit={onSubmit2}\r\n        />\r\n        )}\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n      };  \r\n\r\nexport default MyForm;\r\n"],"names":["MyForm","app","Realm","id","process","products","setProducts","useState","jsonSchema","setjsonSchema","uiSchema","setuiSchema","price","setPrice","jsonSchema2","setjsonSchema2","uiSchema2","setuiSchema2","loading","setLoading","useEffect","fetchData","async","_findCart$","_findCart$$public","_findCart$$public$inp","_findCart$2","_findCart$2$public","_findCart$2$public$in","_findCart$3","_findCart$3$public","_findCart$3$public$in","_findCart$4","_findCart$4$public","_findCart$4$public$ou","_findCart$5","_findCart$5$public","_findCart$5$public$ou","_findCart$6","_findCart$6$public","_findCart$6$public$ou","functionName","findCart","currentUser","callFunction","public","input","jsonData","output","error","console","_jsx","_Fragment","children","_jsxs","Form","className","formData","validator","schema","onSubmit","_ref","args","errorMessage","uppercasedErrorMessage","charAt","toUpperCase","slice","alert","onChange","_ref2","log","totalValue","user","refreshCustomData","customData","cart"],"sourceRoot":""}