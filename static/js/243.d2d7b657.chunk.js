"use strict";(self.webpackChunkproducts=self.webpackChunkproducts||[]).push([[243],{6243:(e,l,o)=>{o.r(l),o.d(l,{default:()=>u});var n=o(5043),t=o(3216),s=o(6244),i=o(443),a=o(3402),d=o(579);const r=e=>{const l=new a.qw({id:"inan-rjsf-dongdocreate-mrlmk"}),[o,t]=(0,n.useState)(!1),[s,i]=(0,n.useState)(""),[r,c]=(0,n.useState)([]),[u,v]=(0,n.useState)(!1);(0,n.useEffect)((()=>{t(e.showModal2)}),[e]);const m=l=>()=>{e.items[l].onDropIndexClick(l)(),e.handleRemove()};return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:e.items.map(((e,l)=>(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex-grow",children:e.children}),(0,d.jsx)("button",{type:"button",className:"ml-2 px-2 py-1 bg-red-500 text-white rounded",onClick:m(l),children:"X\xf3a s\u1ea3n ph\u1ea9m"})]},l)))}),e.canAdd&&(0,d.jsx)("button",{type:"button",className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>t(!0),children:"Th\xeam s\u1ea3n ph\u1ea9m"}),o&&(0,d.jsx)("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-gray-800 bg-opacity-75",children:(0,d.jsxs)("div",{className:"bg-white p-4 border rounded shadow-lg",children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Search:"}),(0,d.jsx)("input",{className:"w-full px-3 py-2 border rounded border-gray-300 focus:outline-none focus:border-indigo-500",type:"text",value:s,onChange:async e=>{if(i(e.target.value),""!==e.target.value){var o;const n=await(null===l||void 0===l||null===(o=l.currentUser)||void 0===o?void 0:o.callFunction("autoComplete",e.target.value));c(n),v(!0)}else c([]),v(!1)}}),u&&(null===r||void 0===r?void 0:r.length)>0&&(0,d.jsx)("div",{className:"absolute bg-white border rounded shadow-lg mt-1 w-auto",children:(0,d.jsx)("ul",{children:null===r||void 0===r?void 0:r.map(((e,l)=>(0,d.jsx)("li",{className:" px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>(async e=>{v(!1),i(e)})(null===e||void 0===e?void 0:e.productName),children:null===e||void 0===e?void 0:e.productName},l)))})})]}),(0,d.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>{e.handleClick(s),i("")},children:" th\xeam"}),(0,d.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>t(!1),children:"\u0110\xf3ng"})]})})]})},c=e=>{let{isOpen:l,onClose:o,message:n,array:t}=e;return l?1===t?(0,d.jsx)("div",{className:"modal-overlay",onClick:o,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("div",{className:"close-wrapper",children:(0,d.jsx)("button",{className:"close-button",onClick:o,children:"X"})}),null===n||void 0===n?void 0:n.map(((e,l)=>(0,d.jsx)("div",{children:e},l)))]})}):(0,d.jsx)("div",{className:"modal-overlay",onClick:o,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("div",{className:"close-wrapper",children:(0,d.jsx)("button",{className:"close-button",onClick:o,children:"X"})}),(0,d.jsx)("p",{children:n})]})}):null},u=()=>{const e=new a.qw({id:"inan-rjsf-dongdocreate-mrlmk"}),[l,o]=(0,n.useState)([]),[u,v]=(0,n.useState)(!1),[m,h]=(0,n.useState)([]),[p,x]=(0,n.useState)([]),[g,j]=(0,n.useState)([]),[b,f]=(0,n.useState)([]),[y,w]=(0,n.useState)([]),[N,C]=(0,n.useState)(!0),[S,k]=(0,n.useState)(!1),[U,D]=(0,n.useState)(!1),[F,A]=(0,n.useState)([]),[T,E]=(0,n.useState)(null),X=(0,t.Zp)(),q=async()=>{try{var l;if(null!==e&&void 0!==e&&null!==(l=e.currentUser)&&void 0!==l&&l.accessToken){var n,t,s,i,a,d,r,c,u,v,m,p,g,b,y,N,S,k,U,D,F,A,T,E,q;await(null===e||void 0===e||null===(n=e.currentUser)||void 0===n?void 0:n.refreshAccessToken());const l="form",X=await(null===e||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.callFunction(l));console.log(null===(s=X[0])||void 0===s||null===(i=s.public)||void 0===i||null===(a=i.input)||void 0===a||null===(d=a.jsonData)||void 0===d||null===(r=d.products)||void 0===r?void 0:r.length),o(null===(c=X[0])||void 0===c||null===(u=c.public)||void 0===u||null===(v=u.input)||void 0===v?void 0:v.jsonData),h(null===(m=X[0])||void 0===m||null===(p=m.public)||void 0===p||null===(g=p.input)||void 0===g?void 0:g.jsonSchema),x(null===(b=X[0])||void 0===b||null===(y=b.public)||void 0===y||null===(N=y.input)||void 0===N?void 0:N.uiSchema),f(null===(S=X[0])||void 0===S||null===(k=S.public)||void 0===k||null===(U=k.output)||void 0===U?void 0:U.jsonSchema),w(null===(D=X[0])||void 0===D||null===(F=D.public)||void 0===F||null===(A=F.output)||void 0===A?void 0:A.uiSchema),j(null===(T=X[0])||void 0===T||null===(E=T.public)||void 0===E||null===(q=E.output)||void 0===q?void 0:q.jsonData),C(!1)}else X("/inan-rjsf/login")}catch(L){console.error("Error fetching products:",L),C(!1)}};(0,n.useEffect)((()=>{q()}),[]);const L=async()=>{console.log("remove"),q()};return(0,d.jsxs)(d.Fragment,{children:[N?(0,d.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,d.jsx)("div",{className:"text-gray-600 text-lg",children:"Loading..."})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex justify-center",children:l&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",formData:l,validator:i.Ay,schema:m,uiSchema:p,onSubmit:async e=>{let{formData:l}=e;q()},onChange:async l=>{let{formData:o}=l;try{var n,t;const l=[null===e||void 0===e||null===(n=e.currentUser)||void 0===n?void 0:n.id,null===o||void 0===o?void 0:o.products];await(null===e||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.callFunction("updateCart",...l))}catch(s){console.log(s)}},templates:{ArrayFieldTemplate:l=>(0,d.jsx)(r,{showModal2:u,...l,handleClick:l=>(async l=>{var o;const n=[l,null===e||void 0===e||null===(o=e.currentUser)||void 0===o?void 0:o.id];if(k(!0),q(),""!==l)try{var t;const l=await(null===e||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.callFunction("AddToCart",...n));D(!0),A(null===l||void 0===l?void 0:l.message),E(0),v(!1)}catch(s){console.log(s)}finally{k(!1)}})(l),isLoading:S,handleRemove:L})}})," "]})}),0!==(null===g||void 0===g?void 0:g.totalValue)&&(0,d.jsx)("div",{className:"flex justify-center mt-8",children:(0,d.jsx)(s.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",validator:i.Ay,schema:b,uiSchema:y,formData:g,onSubmit:async()=>{var l;const o=await e.currentUser.refreshCustomData(),n=[null===e||void 0===e||null===(l=e.currentUser)||void 0===l?void 0:l.customData,null===o||void 0===o?void 0:o.cart];try{var t;const l=await(null===e||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.callFunction("ToTempCart",...n));D(!0),A(null===l||void 0===l?void 0:l.message),E(0),q()}catch(s){alert(s.error),A(s.error),D(!0)}}})})]}),(0,d.jsx)("div",{children:(0,d.jsx)(c,{isOpen:U,onClose:()=>{D(!1)},message:F,array:T})})]})}}}]);
//# sourceMappingURL=243.d2d7b657.chunk.js.map