"use strict";(self.webpackChunkproducts=self.webpackChunkproducts||[]).push([[477],{28:(e,s,t)=>{t.d(s,{A:()=>n});var a=t(5043),r=t(579);const n=e=>{let{isOpen:s,onClose:t,message:n,array:l}=e;const[i,c]=(0,a.useState)(s);(0,a.useEffect)((()=>{c(s)}),[s]);return(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-auto transition-opacity ".concat(i?"opacity-100":"opacity-0 pointer-events-none"),children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 transition-opacity"}),(0,r.jsxs)("div",{className:"relative w-full max-w-md p-6 mx-auto bg-white rounded shadow-lg border border-gray-300 transition-transform transform",children:[(0,r.jsx)("div",{className:"absolute top-0 right-0 p-2",children:(0,r.jsx)("button",{className:"text-gray-600 hover:text-gray-800",onClick:()=>{c(!1),t(),1===l&&window.location.reload(!0)},children:(0,r.jsx)("svg",{className:"w-6 h-6 fill-current",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M6.293 6.293a1 1 0 011.414 0L12 10.586l4.293-4.293a1 1 0 111.414 1.414L13.414 12l4.293 4.293a1 1 0 01-1.414 1.414L12 13.414l-4.293 4.293a1 1 0 01-1.414-1.414L10.586 12 6.293 7.707a1 1 0 010-1.414z"})})})}),(0,r.jsx)("div",{className:"p-4",children:Array.isArray(n)?n.map(((e,s)=>(0,r.jsx)("div",{className:"mb-2",children:e},s))):(0,r.jsx)("p",{children:n})})]})]})}},7477:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(5043),r=t(3216),n=t(6244),l=t(443),i=t(3402),c=t(28),o=t(579);const d=()=>{var e;const s=new i.qw({id:"inan-rjsf-dongdocreate-mrlmk"}),[t,d]=(0,a.useState)([]),[u,m]=(0,a.useState)({}),[p,h]=(0,a.useState)({}),[x,v]=(0,a.useState)({}),[g,y]=(0,a.useState)([]),[j,f]=(0,a.useState)(!0),[w,N]=(0,a.useState)([]),[b,k]=(0,a.useState)(!1),[S,C]=(0,a.useState)([]),[U,A]=(0,a.useState)(!1),[F,T]=(0,a.useState)([]),[D,L]=(0,a.useState)(null),E=(0,r.Zp)();(0,a.useEffect)((()=>{P()}),[]);const P=async()=>{try{var e,t;null!==(e=s.currentUser)&&void 0!==e&&e.accessToken||E("/inan-rjsf/login"),await(null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.refreshAccessToken()),d(null===s||void 0===s?void 0:s.currentUser)}catch(r){var a;null!==(a=s.currentUser)&&void 0!==a&&a.accessToken||E("/inan-rjsf/login")}},$=async()=>{try{var e,t,a,r,n,l,i,c,o,d,u,m,p;const x="form",g=await(null===s||void 0===s||null===(e=s.currentUser)||void 0===e?void 0:e.callFunction(x)),j=await s.currentUser.refreshCustomData();N(j),console.log(j),y(null===(t=g[0])||void 0===t||null===(a=t.public)||void 0===a||null===(r=a.output)||void 0===r?void 0:r.jsonData),C(null===(n=g[0])||void 0===n||null===(l=n.public)||void 0===l||null===(i=l.input)||void 0===i?void 0:i.jsonData),h(null===(c=g[0])||void 0===c||null===(o=c.public)||void 0===o||null===(d=o.input)||void 0===d?void 0:d.jsonSchema),v(null===(u=g[0])||void 0===u||null===(m=u.public)||void 0===m||null===(p=m.input)||void 0===p?void 0:p.uiSchema),f(!1)}catch(x){console.error("Error fetching products:",x),f(!1)}};(0,a.useEffect)((()=>{$()}),[]);return(0,o.jsxs)(o.Fragment,{children:[j?(0,o.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,o.jsx)("div",{className:"text-gray-600 text-lg",children:"Loading..."})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"flex justify-center",children:t&&(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(n.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",validator:l.Ay,schema:p,uiSchema:x,onSubmit:async e=>{var t;let{formData:a}=e;const r=[a,null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.id];if(a)try{var n;const e=await(null===s||void 0===s||null===(n=s.currentUser)||void 0===n?void 0:n.callFunction("QueryProducts",...r));$(),A(!0),T(null===e||void 0===e?void 0:e.message),L(0),k(!1)}catch(l){console.log(l)}else $()}}):(0,o.jsx)("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-md shadow-md hover:bg-blue-600 focus:outline-none focus:ring focus:ring-blue-200 transform transition duration-300 ease-in-out hover:scale-105",children:"M\u1edf Form"})})}),Array.isArray(null===g||void 0===g?void 0:g.products)&&(null===g||void 0===g?void 0:g.products.length)>0?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold my-4",children:"Danh s\xe1ch s\u1ea3n ph\u1ea9m"}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-2 md:px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"T\xean s\u1ea3n ph\u1ea9m"}),(0,o.jsx)("th",{scope:"col",className:"px-2 md:px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"S\u1ed1 l\u01b0\u1ee3ng trong kho"}),(0,o.jsx)("th",{scope:"col",className:"px-2 md:px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Gi\xe1"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===g||void 0===g?void 0:g.products.map(((e,t)=>(0,o.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",children:[(0,o.jsx)("td",{className:"px-2 md:px-6 py-4 md:py-2 whitespace-nowrap",onClick:()=>(async e=>{var t;const a=[e,null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.id];console.log("add products",e);try{const e=await s.currentUser.callFunction("AddToCart",...a);A(!0),T(e.message),console.log(e),L(0),$()}catch(r){A(!0),T(r.error)}})(e),onMouseEnter:e=>e.target.classList.add("bg-gray-100"),onMouseLeave:e=>e.target.classList.remove("bg-gray-100"),children:e.productName}),(0,o.jsx)("td",{className:"px-2 md:px-6 py-4 md:py-2 whitespace-nowrap",children:e.quantity}),(0,o.jsx)("td",{className:"px-2 md:px-6 py-4 md:py-2 whitespace-nowrap",children:e.sellingPrice})]},t)))})]})})]})}):(0,o.jsxs)("div",{children:[" ",(0,o.jsx)("h2",{className:"text-lg font-semibold my-4",children:"Danh s\xe1ch s\u1ea3n ph\u1ea9m"})," ",(0,o.jsx)("div",{className:"px-6 py-4 whitespace-nowrap",children:"Kh\xf4ng c\xf3 th\xf4ng tin"})]}),Array.isArray(w.cart)&&w.cart.length>0?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold my-4",children:"Danh s\xe1ch s\u1ea3n ph\u1ea9m trong gi\u1ecf h\xe0ng"}),(0,o.jsxs)("div",{className:"overflow-x-auto",children:[(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col",className:"px-2 md:px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"T\xean s\u1ea3n ph\u1ea9m"}),(0,o.jsx)("th",{scope:"col",className:"px-2 md:px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"S\u1ed1 l\u01b0\u1ee3ng"}),(0,o.jsx)("th",{scope:"col",className:"px-2 md:px-6 py-3 text-left text-sm font-medium text-gray-500 uppercase tracking-wider",children:"Gi\xe1"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===(e=w.cart)||void 0===e?void 0:e.map(((e,t)=>(0,o.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",children:[(0,o.jsx)("td",{className:"px-2 md:px-6 py-4 md:py-2 whitespace-nowrap",onClick:()=>(async e=>{var t;const a=[null===s||void 0===s||null===(t=s.currentUser)||void 0===t?void 0:t.id,e._id.$oid];console.log("add products",e);try{const e=await s.currentUser.callFunction("DeleProduct",...a);A(!0),T(e.message),L(0),$()}catch(r){console.log(r.error)}})(e),children:e.productName}),(0,o.jsx)("td",{className:"px-2 md:px-6 py-4 md:py-2 whitespace-nowrap",children:(0,o.jsx)("input",{type:"number",className:"border border-gray-300 rounded px-2 py-1",value:u[e._id.$oid]||1,onChange:t=>(async(e,t)=>{var a;const r=parseInt(e.target.value,10);m({...u,[t]:r});const n=[null===s||void 0===s||null===(a=s.currentUser)||void 0===a?void 0:a.id,t,r];try{var l;const e=await(null===s||void 0===s||null===(l=s.currentUser)||void 0===l?void 0:l.callFunction("updateCart",...n));"Quantity updated successfully"!==e.message&&(A(!0),T(e.message),L(0),m({...u,[t]:1}))}catch(i){A(!0),T(i.error),L(0)}})(t,e._id.$oid)})}),(0,o.jsxs)("td",{className:"px-2 md:px-6 py-4 md:py-2 whitespace-nowrap",children:[e.sellingPrice.$numberInt," Ngh\xecn \u0111\u1ed3ng"]})]},t)))})]}),(0,o.jsxs)("div",{className:"flex justify-end items-center",children:[(0,o.jsx)("button",{onClick:$,className:"bg-blue-500 text-white px-4 py-2 rounded mr-4",children:"T\xednh ti\u1ec1n"}),(0,o.jsxs)("p",{className:"py-2",children:["T\u1ed5ng ti\u1ec1n: ",g.TotalPrice," Ngh\xecn \u0111\u1ed3ng"]}),(0,o.jsx)("button",{onClick:async()=>{for(let s=0;s<w.cart.length;s++)m({...u,[w.cart[s]._id.$oid]:1});const e=[w,null===w||void 0===w?void 0:w.cart];try{const t=await s.currentUser.callFunction("ToTempCart",...e);A(!0),T(t.message),L(0),$()}catch(t){A(!0),T(t.error),L(0)}},className:"bg-green-500 text-white px-4 py-2 rounded ml-2",children:"\u0110\u1eb7t h\xe0ng"})]})]})]})}):(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-lg font-semibold my-4",children:"Danh s\xe1ch s\u1ea3n ph\u1ea9m trong gi\u1ecf h\xe0ng"}),(0,o.jsx)("div",{className:"px-6 py-4 whitespace-nowrap",children:"Kh\xf4ng c\xf3 th\xf4ng tin"})]})]}),(0,o.jsx)(c.A,{isOpen:U,onClose:()=>{A(!1)},message:F,array:0})]})}}}]);
//# sourceMappingURL=477.22b395d1.chunk.js.map