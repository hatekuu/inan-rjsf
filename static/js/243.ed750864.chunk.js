"use strict";(self.webpackChunkproducts=self.webpackChunkproducts||[]).push([[243],{6243:(l,e,o)=>{o.r(e),o.d(e,{default:()=>c});var n=o(5043),t=o(3216),i=o(6244),s=o(443),a=o(3402),d=o(579);const r=l=>{let{isOpen:e,onClose:o,message:n,array:t}=l;return e?1===t?(0,d.jsx)("div",{className:"modal-overlay",onClick:o,children:(0,d.jsxs)("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[(0,d.jsx)("div",{className:"close-wrapper",children:(0,d.jsx)("button",{className:"close-button",onClick:o,children:"X"})}),null===n||void 0===n?void 0:n.map(((l,e)=>(0,d.jsx)("div",{children:l},e)))]})}):(0,d.jsx)("div",{className:"modal-overlay",onClick:o,children:(0,d.jsxs)("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[(0,d.jsx)("div",{className:"close-wrapper",children:(0,d.jsx)("button",{className:"close-button",onClick:o,children:"X"})}),(0,d.jsx)("p",{children:n})]})}):null},u=l=>{const e=new a.qw({id:"inan-rjsf-dongdocreate-mrlmk"}),[o,t]=(0,n.useState)(!1),[i,s]=(0,n.useState)(""),[u,c]=(0,n.useState)([]),[v,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[x,g]=(0,n.useState)([]),j=e=>()=>{l.items[e].onDropIndexClick(e)(),l.handleRemove()};return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:l.items.map(((l,e)=>(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex-grow",children:l.children}),(0,d.jsx)("button",{type:"button",className:"ml-2 px-2 py-1 bg-red-500 text-white rounded",onClick:j(e),children:"X\xf3a s\u1ea3n ph\u1ea9m"})]},e)))}),l.canAdd&&(0,d.jsx)("button",{type:"button",className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>t(!0),children:"Th\xeam s\u1ea3n ph\u1ea9m"}),o&&(0,d.jsx)("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-gray-800 bg-opacity-75",children:(0,d.jsxs)("div",{className:"bg-white p-4 border rounded shadow-lg",children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Search:"}),(0,d.jsx)("input",{className:"w-full px-3 py-2 border rounded border-gray-300 focus:outline-none focus:border-indigo-500",type:"text",value:i,onChange:async l=>{if(s(l.target.value),""!==l.target.value){var o;const n=await(null===e||void 0===e||null===(o=e.currentUser)||void 0===o?void 0:o.callFunction("autoComplete",l.target.value));c(n),m(!0)}else c([]),m(!1)}}),v&&(null===u||void 0===u?void 0:u.length)>0&&(0,d.jsx)("div",{className:"absolute bg-white border rounded shadow-lg mt-1 w-auto",children:(0,d.jsx)("ul",{children:null===u||void 0===u?void 0:u.map(((l,e)=>(0,d.jsx)("li",{className:" px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>(async l=>{m(!1),s(l)})(null===l||void 0===l?void 0:l.productName),children:null===l||void 0===l?void 0:l.productName},e)))})})]}),(0,d.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>{l.handleClick(),(async()=>{var l;const o=[i,null===e||void 0===e||null===(l=e.currentUser)||void 0===l?void 0:l.id];if(""!==i)try{var n;const l=await(null===e||void 0===e||null===(n=e.currentUser)||void 0===n?void 0:n.callFunction("AddToCart",...o));p(!0),g(null===l||void 0===l?void 0:l.message),t(!1),s("")}catch(a){console.log(a)}})()},children:"Th\xeam"}),(0,d.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>t(!1),children:"\u0110\xf3ng"})]})}),(0,d.jsx)(r,{isOpen:h,onClose:()=>{p(!1)},message:x,array:0})]})},c=()=>{const l=new a.qw({id:"inan-rjsf-dongdocreate-mrlmk"}),[e,o]=(0,n.useState)([]),[c,v]=(0,n.useState)(0),[m,h]=(0,n.useState)(2),[p,x]=(0,n.useState)([]),[g,j]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[f,w]=(0,n.useState)([]),[N,C]=(0,n.useState)([]),[S,k]=(0,n.useState)(!0),[U,D]=(0,n.useState)(!1),[F,A]=(0,n.useState)([]),[T,O]=(0,n.useState)(null),X=(0,t.Zp)(),q=async()=>{try{var e;if(null!==l&&void 0!==l&&null!==(e=l.currentUser)&&void 0!==e&&e.accessToken){var n,t,i,s,a,d,r,u,c,m,h,p,g,b,f,N,S,U,D,F,A,T,O,q,E;await(null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.refreshAccessToken());const e="form",X=await(null===l||void 0===l||null===(t=l.currentUser)||void 0===t?void 0:t.callFunction(e));console.log(null===(i=X[0])||void 0===i||null===(s=i.public)||void 0===s||null===(a=s.input)||void 0===a||null===(d=a.jsonData)||void 0===d||null===(r=d.products)||void 0===r?void 0:r.length),v((()=>{var l,e,o,n,t;return null===(l=X[0])||void 0===l||null===(e=l.public)||void 0===e||null===(o=e.input)||void 0===o||null===(n=o.jsonData)||void 0===n||null===(t=n.products)||void 0===t?void 0:t.length})),o(null===(u=X[0])||void 0===u||null===(c=u.public)||void 0===c||null===(m=c.input)||void 0===m?void 0:m.jsonData),x(null===(h=X[0])||void 0===h||null===(p=h.public)||void 0===p||null===(g=p.input)||void 0===g?void 0:g.jsonSchema),j(null===(b=X[0])||void 0===b||null===(f=b.public)||void 0===f||null===(N=f.input)||void 0===N?void 0:N.uiSchema),w(null===(S=X[0])||void 0===S||null===(U=S.public)||void 0===U||null===(D=U.output)||void 0===D?void 0:D.jsonSchema),C(null===(F=X[0])||void 0===F||null===(A=F.public)||void 0===A||null===(T=A.output)||void 0===T?void 0:T.uiSchema),y(null===(O=X[0])||void 0===O||null===(q=O.public)||void 0===q||null===(E=q.output)||void 0===E?void 0:E.jsonData),k(!1)}else X("/inan-rjsf/login")}catch(P){console.error("Error fetching products:",P),k(!1)}};(0,n.useEffect)((()=>{q()}),[c]);const E=async()=>{console.log("add"),q(),v(c+1)},P=async()=>{console.log("remove"),v(c-1),q()};return(0,d.jsxs)(d.Fragment,{children:[S?(0,d.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,d.jsx)("div",{className:"text-gray-600 text-lg",children:"Loading..."})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex justify-center",children:e&&(0,d.jsx)(i.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",formData:e,validator:s.Ay,schema:p,uiSchema:g,onSubmit:async e=>{var o;let{formData:n}=e;const t=[null===l||void 0===l||null===(o=l.currentUser)||void 0===o?void 0:o.id,null===n||void 0===n?void 0:n.products];try{var i;const e=await(null===(i=l.currentUser)||void 0===i?void 0:i.callFunction("updateCart",...t));null!==e&&void 0!==e&&e.message&&(D(!0),A(null===e||void 0===e?void 0:e.message),O(1)),q()}catch(s){const l=s.error;D(!0),A(l)}},onChange:async e=>{let{formData:o}=e;try{var n,t;const e=[null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.id,null===o||void 0===o?void 0:o.products];await(null===l||void 0===l||null===(t=l.currentUser)||void 0===t?void 0:t.callFunction("updateCart",...e))}catch(i){console.log(i)}},templates:{ArrayFieldTemplate:l=>(0,d.jsx)(u,{...l,handleClick:E,handleRemove:P})}})}),0!==(null===b||void 0===b?void 0:b.totalValue)&&(0,d.jsx)("div",{className:"flex justify-center mt-8",children:(0,d.jsx)(i.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",validator:s.Ay,schema:f,uiSchema:N,formData:b,onSubmit:async()=>{var e;const o=await l.currentUser.refreshCustomData(),n=[null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.customData,null===o||void 0===o?void 0:o.cart];try{var t;const e=await(null===l||void 0===l||null===(t=l.currentUser)||void 0===t?void 0:t.callFunction("ToTempCart",...n));D(!0),A(null===e||void 0===e?void 0:e.message),O(0),q()}catch(i){alert(i.error),A(i.error),D(!0)}}})})]}),(0,d.jsx)("div",{children:(0,d.jsx)(r,{isOpen:U,onClose:()=>{D(!1)},message:F,array:T})})]})}}}]);
//# sourceMappingURL=243.ed750864.chunk.js.map