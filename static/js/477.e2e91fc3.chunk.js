"use strict";(self.webpackChunkproducts=self.webpackChunkproducts||[]).push([[477],{7477:(t,e,r)=>{r.r(e),r.d(e,{default:()=>u});var a=r(5043),l=r(3216),c=r(6244),n=r(443),o=r(3402),s=r(579);const u=()=>{const t=new o.qw({id:"inan-rjsf-dongdocreate-mrlmk"}),[e,r]=(0,a.useState)([]),[u,i]=(0,a.useState)([]),[d,v]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),[w,g]=(0,a.useState)([]),[j,y]=(0,a.useState)(!0),x=(0,l.Zp)();(0,a.useEffect)((()=>{S(),console.log(u)}),[]);const S=async()=>{try{var e,a,l,c,n,o,s,u,d,m,p,w,j,S,U,b,C,A;const D="form",k=await t.currentUser.callFunction(D,t.currentUser.id);r(null===(e=k[0])||void 0===e||null===(a=e.public)||void 0===a||null===(l=a.input)||void 0===l?void 0:l.jsonData),i(null===(c=k[0])||void 0===c||null===(n=c.public)||void 0===n||null===(o=n.input)||void 0===o?void 0:o.jsonSchema),v(null===(s=k[0])||void 0===s||null===(u=s.public)||void 0===u||null===(d=u.input)||void 0===d?void 0:d.uiSchema),f(null===(m=k[0])||void 0===m||null===(p=m.public)||void 0===p||null===(w=p.output)||void 0===w?void 0:w.jsonSchema),g(null===(j=k[0])||void 0===j||null===(S=j.public)||void 0===S||null===(U=S.output)||void 0===U?void 0:U.uiSchema),h(null===(b=k[0])||void 0===b||null===(C=b.public)||void 0===C||null===(A=C.output)||void 0===A?void 0:A.jsonData),y(!1),await t.currentUser.refreshAccessToken(),t.currentUser||x("/inan-rjsf/login")}catch(D){console.error("Error fetching products:",D),y(!1)}};return(0,s.jsx)(s.Fragment,{children:j?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,s.jsx)("div",{className:"text-gray-600 text-lg",children:"Loading..."})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(c.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",formData:e,validator:n.Ay,schema:u,uiSchema:d,onSubmit:async e=>{let{formData:r}=e;const a=[t.currentUser.id,null===r||void 0===r?void 0:r.products];try{await t.currentUser.callFunction("updateCart",...a),S()}catch(l){const t=l.error,e=t.charAt(0).toUpperCase()+t.slice(1);alert(e)}},onChange:async e=>{let{formData:r}=e;const a=[t.currentUser.id,null===r||void 0===r?void 0:r.products];try{await t.currentUser.callFunction("updateCart",...a),console.log(r.products)}catch(l){const t=l.error,e=t.charAt(0).toUpperCase()+t.slice(1);alert(e)}}})}),0!==(null===m||void 0===m?void 0:m.totalValue)&&(0,s.jsx)("div",{className:"flex justify-center mt-8",children:(0,s.jsx)(c.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",validator:n.Ay,schema:p,uiSchema:w,formData:m,onSubmit:async()=>{const e=await t.currentUser.refreshCustomData(),r=[t.currentUser.customData,e.cart];try{await t.currentUser.callFunction("ToTempCart",...r),S()}catch(a){const t=a.error,e=t.charAt(0).toUpperCase()+t.slice(1);alert(e)}}})})]})})}}}]);
//# sourceMappingURL=477.e2e91fc3.chunk.js.map