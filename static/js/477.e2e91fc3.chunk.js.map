{"version":3,"file":"static/js/477.e2e91fc3.chunk.js","mappings":"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","sources":["routers/cart.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport Form from \"@rjsf/core\";\r\nimport './Myform.css'; // Import file CSS\r\nimport  validator from '@rjsf/validator-ajv8';\r\nimport * as Realm from 'realm-web';\r\nconst MyForm = () => {\r\n    const app = new Realm.App({ id: process.env.REACT_APP_KEY });\r\n    const [products, setProducts] = useState([]);\r\n    const [jsonSchema, setjsonSchema] = useState([]);\r\n    const [uiSchema, setuiSchema] = useState([]);\r\n    const [price, setPrice]= useState([])\r\n  const [jsonSchema2 ,setjsonSchema2] = useState([]);\r\n  const [uiSchema2, setuiSchema2] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    fetchData();\r\n    console.log(jsonSchema)\r\n  }, []);\r\n  const fetchData = async () => {\r\n    try {\r\n      const functionName = \"form\";\r\n      const findCart = await app.currentUser.callFunction(functionName,app.currentUser.id);\r\n      setProducts(findCart[0]?.public?.input?.jsonData)\r\n      setjsonSchema(findCart[0]?.public?.input?.jsonSchema)\r\n      setuiSchema(findCart[0]?.public?.input?.uiSchema)\r\n     setjsonSchema2(findCart[0]?.public?.output?.jsonSchema)\r\n     setuiSchema2(findCart[0]?.public?.output?.uiSchema)\r\n    setPrice(findCart[0]?.public?.output?.jsonData)\r\n    setLoading(false);\r\n      \r\n      await app.currentUser.refreshAccessToken();\r\n      if(!app.currentUser){\r\n        navigate('/inan-rjsf/login');\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async ({ formData }) => {\r\n    const functionName = \"updateCart\";\r\n    const args = [app.currentUser.id, formData?.products];\r\n    try {\r\n      await app.currentUser.callFunction(functionName, ...args);\r\n      fetchData();\r\n    } catch (error) {\r\n      const errorMessage = error.error;\r\n      const uppercasedErrorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n      alert(uppercasedErrorMessage);\r\n    }\r\n  };\r\n\r\n  const onChange = async ({ formData }) => {\r\n    const functionName = \"updateCart\";\r\n    const args = [app.currentUser.id, formData?.products];\r\n    try {\r\n      await app.currentUser.callFunction(functionName, ...args);\r\n      console.log(formData.products);\r\n    } catch (error) {\r\n      const errorMessage = error.error;\r\n      const uppercasedErrorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n      alert(uppercasedErrorMessage);\r\n    }\r\n  };\r\n\r\n  const onSubmit2 = async () => {\r\n    const user = await app.currentUser.refreshCustomData();\r\n    const functionName = \"ToTempCart\";\r\n    const args = [app.currentUser.customData, user.cart];\r\n    try {\r\n      await app.currentUser.callFunction(functionName, ...args);\r\n      fetchData();\r\n    } catch (error) {\r\n      const errorMessage = error.error;\r\n      const uppercasedErrorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n      alert(uppercasedErrorMessage);\r\n    }\r\n  };\r\n  // const jsonSchema22 = {\r\n    \r\n \r\n  // \"title\": \"Product Information\",\r\n  // \"type\": \"object\",\r\n  // \"properties\": {\r\n  //   \"products\": {\r\n  //     \"type\": \"array\",\r\n  //     \"title\": \"Sản phẩm\",\r\n  //     \"items\": {\r\n  //       \"type\": \"object\",\r\n  //       \"properties\": {\r\n  //         \"productName\": {\r\n  //           \"type\": \"string\",\r\n  //           \"title\": \"Tên sản phẩm\",\r\n           \r\n  //         },\r\n  //         \"productType\": {\r\n  //           \"type\": \"string\",\r\n  //           \"title\": \"Loại\"\r\n  //         },\r\n  //         \"quantity\": {\r\n  //           \"type\": \"number\",\r\n  //           \"title\": \"Số lượng\",\r\n  //           \"minimum\": 1,\r\n  //           \"maximum\": 10,\r\n  //         },\r\n  //         \"sellingPrice\": {\r\n  //           \"type\": \"number\",\r\n  //           \"title\": \"Giá\"\r\n  //         }\r\n  //       }\r\n  //     }\r\n  //   },\r\n  \r\n    \r\n  // }}\r\n  \r\n  // const uiSchema = {\r\n  //   \"ui:classNames\": \"my-form\",\r\n  //   products: {\r\n  //     \"ui:options\": {\r\n  //       orderable: false,\r\n  //     },\r\n  //     items: {\r\n  //       \"ui:classNames\": \"inline-field\",\r\n  //         productName: { \"ui:options\": {\r\n  //          readonly:true\r\n  //         }},\r\n  //         productType: { \"ui:options\": {\r\n  //           readonly:true\r\n  //          }},\r\n  //          sellingPrice: { \"ui:options\": {\r\n  //           readonly:true\r\n  //          }}\r\n  //     },\r\n  //   },\r\n  //   \"ui:submitButtonOptions\": {\r\n  //     props: {\r\n  //       className: \"sumit\",\r\n  //     },\r\n  //     submitText: \"Tính tiền\",\r\n     \r\n  //   },\r\n  // };\r\n  \r\n  // const jsonSchema2 = {\r\n  //   \"title\": \"TotalPrice\",\r\n  //   \"type\": \"object\",\r\n  //   \"properties\": {\r\n  //     \"totalValue\": {\r\n  //       \"type\": \"number\",\r\n  //       \"title\": \"Tổng thành tiền\"\r\n  //     },\r\n  //     \"items\": {\r\n  //       \"title\": \"Mã giảm giá\",\r\n  //       \"type\": \"array\",\r\n  //       \"items\": {\r\n  //         \"type\": \"object\",\r\n  //         \"anyOf\": [\r\n  //           {\r\n  //             \"properties\": {\r\n  //               \"foo\": {\r\n  //                 \"type\": \"string\"\r\n  //               }\r\n  //             }\r\n  //           },\r\n  //           {\r\n  //             \"properties\": {\r\n  //               \"bar\": {\r\n  //                 \"type\": \"string\"\r\n  //               }\r\n  //             }\r\n  //           }\r\n  //         ]\r\n  //       }\r\n  //     }\r\n  //   },\r\n  //   \"anyOf\": [\r\n  //     {\r\n  //       \"title\": \"Không sử dụng mã giảm giá\",\r\n  //       \"properties\": {\r\n        \r\n  //       }\r\n  //     },\r\n  //     {\r\n  //       \"title\": \"Sử dụng mã giảm giá\",\r\n  //       \"properties\": {\r\n  //         \"discount\": {\r\n  //           \"title\":\"Mã giảm\",\r\n  //           \"enum\": [0.1, 0.2],\r\n  //           \"type\": \"number\"\r\n  //         }\r\n  //       },\r\n  //       \"required\": [\"discount\"]\r\n  //     }\r\n  //   ]\r\n  // };\r\n  \r\n  // const uiSchema2 = {\r\n \r\n  //     totalValue: {\r\n  //       \"ui:classNames\": \"inline-field\",\r\n  //       \"ui:options\": {\r\n  //         orderable: false,\r\n  //         readonly:true\r\n  //       },\r\n  //     },\r\n  //     items:{\r\n  //       \"ui:classNames\": \"inline-field hide\",\r\n   \r\n  //     },\r\n  //     \"ui:submitButtonOptions\": {\r\n  //       props: {\r\n  //         className: \"sumit\",\r\n  //       },\r\n  //       submitText: \"Đặt hàng\",\r\n       \r\n  //     },\r\n  //   };\r\n  return (\r\n    <>\r\n    {loading ? (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <div className=\"text-gray-600 text-lg\">Loading...</div>\r\n      </div>\r\n    ) : (\r\n      <>\r\n        <div className=\"flex justify-center\">\r\n          <Form\r\n            className=\"w-full max-w-md p-8 bg-white rounded-lg shadow-lg\"\r\n            formData={products}\r\n            validator={validator}\r\n            schema={jsonSchema}\r\n            uiSchema={uiSchema}\r\n            onSubmit={onSubmit}\r\n            onChange={onChange}\r\n          />\r\n        </div>\r\n  \r\n        {price?.totalValue !== 0 && (\r\n          <div className=\"flex justify-center mt-8\">\r\n            <Form\r\n              className=\"w-full max-w-md p-8 bg-white rounded-lg shadow-lg\"\r\n              validator={validator}\r\n              schema={jsonSchema2}\r\n              uiSchema={uiSchema2}\r\n              formData={price}\r\n              onSubmit={onSubmit2}\r\n            />\r\n          </div>\r\n        )}\r\n      </>\r\n    )}\r\n  </>\r\n  \r\n  );\r\n      };  \r\n\r\n\r\nexport default MyForm;\r\n"],"names":["MyForm","app","Realm","id","process","products","setProducts","useState","jsonSchema","setjsonSchema","uiSchema","setuiSchema","price","setPrice","jsonSchema2","setjsonSchema2","uiSchema2","setuiSchema2","loading","setLoading","navigate","useNavigate","useEffect","fetchData","console","log","async","_findCart$","_findCart$$public","_findCart$$public$inp","_findCart$2","_findCart$2$public","_findCart$2$public$in","_findCart$3","_findCart$3$public","_findCart$3$public$in","_findCart$4","_findCart$4$public","_findCart$4$public$ou","_findCart$5","_findCart$5$public","_findCart$5$public$ou","_findCart$6","_findCart$6$public","_findCart$6$public$ou","functionName","findCart","currentUser","callFunction","public","input","jsonData","output","refreshAccessToken","error","_jsx","_Fragment","children","className","_jsxs","Form","formData","validator","schema","onSubmit","_ref","args","errorMessage","uppercasedErrorMessage","charAt","toUpperCase","slice","alert","onChange","_ref2","totalValue","user","refreshCustomData","customData","cart"],"sourceRoot":""}