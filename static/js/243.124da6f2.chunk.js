"use strict";(self.webpackChunkproducts=self.webpackChunkproducts||[]).push([[243],{6243:(e,l,o)=>{o.r(l),o.d(l,{default:()=>u});var n=o(5043),t=o(3216),i=o(6244),s=o(443),a=o(3402),d=o(579);const r=e=>{let{isOpen:l,onClose:o,message:n,array:t}=e;return l?1===t?(0,d.jsx)("div",{className:"modal-overlay",onClick:o,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("div",{className:"close-wrapper",children:(0,d.jsx)("button",{className:"close-button",onClick:o,children:"X"})}),null===n||void 0===n?void 0:n.map(((e,l)=>(0,d.jsx)("div",{children:e},l)))]})}):(0,d.jsx)("div",{className:"modal-overlay",onClick:o,children:(0,d.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,d.jsx)("div",{className:"close-wrapper",children:(0,d.jsx)("button",{className:"close-button",onClick:o,children:"X"})}),(0,d.jsx)("p",{children:n})]})}):null},c=e=>{const l=new a.qw({id:"inan-rjsf-dongdocreate-mrlmk"}),[o,t]=(0,n.useState)(!1),[i,s]=(0,n.useState)(""),[c,u]=(0,n.useState)([]),[v,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[x,g]=(0,n.useState)([]),j=l=>()=>{e.items[l].onDropIndexClick(l)(),e.handleRemove()};return(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:e.items.map(((e,l)=>(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"flex-grow",children:e.children}),(0,d.jsx)("button",{type:"button",className:"ml-2 px-2 py-1 bg-red-500 text-white rounded",onClick:j(l),children:"X\xf3a s\u1ea3n ph\u1ea9m"})]},l)))}),e.canAdd&&(0,d.jsx)("button",{type:"button",className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>t(!0),children:"Th\xeam s\u1ea3n ph\u1ea9m"}),o&&(0,d.jsx)("div",{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-gray-800 bg-opacity-75",children:(0,d.jsxs)("div",{className:"bg-white p-4 border rounded shadow-lg",children:[(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Search:"}),(0,d.jsx)("input",{className:"w-full px-3 py-2 border rounded border-gray-300 focus:outline-none focus:border-indigo-500",type:"text",value:i,onChange:async e=>{if(s(e.target.value),""!==e.target.value){var o;const n=await(null===l||void 0===l||null===(o=l.currentUser)||void 0===o?void 0:o.callFunction("autoComplete",e.target.value));u(n),m(!0)}else u([]),m(!1)}}),v&&(null===c||void 0===c?void 0:c.length)>0&&(0,d.jsx)("div",{className:"absolute bg-white border rounded shadow-lg mt-1 w-auto",children:(0,d.jsx)("ul",{children:null===c||void 0===c?void 0:c.map(((e,l)=>(0,d.jsx)("li",{className:" px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>(async e=>{m(!1),s(e)})(null===e||void 0===e?void 0:e.productName),children:null===e||void 0===e?void 0:e.productName},l)))})})]}),(0,d.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>{e.handleClick(),(async()=>{var e;const o=[i,null===l||void 0===l||null===(e=l.currentUser)||void 0===e?void 0:e.id];if(""!==i)try{var n;const e=await(null===l||void 0===l||null===(n=l.currentUser)||void 0===n?void 0:n.callFunction("AddToCart",...o));p(!0),g(null===e||void 0===e?void 0:e.message),t(!1),s("")}catch(a){console.log(a)}})()},children:"Th\xeam"}),(0,d.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded",onClick:()=>t(!1),children:"\u0110\xf3ng"})]})}),(0,d.jsx)(r,{isOpen:h,onClose:()=>{p(!1)},message:x,array:0})]})},u=()=>{const e=new a.qw({id:"inan-rjsf-dongdocreate-mrlmk"}),[l,o]=(0,n.useState)([]),[u,v]=(0,n.useState)(""),[m,h]=(0,n.useState)([]),[p,x]=(0,n.useState)([]),[g,j]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[f,w]=(0,n.useState)([]),[C,N]=(0,n.useState)(!0),[S,k]=(0,n.useState)(!1),[U,D]=(0,n.useState)([]),[F,A]=(0,n.useState)(null),T=(0,t.Zp)();(0,n.useEffect)((()=>{R()}),[u]);const R=async()=>{try{var l;if(null!==e&&void 0!==e&&null!==(l=e.currentUser)&&void 0!==l&&l.accessToken){var n,t,i,s,a,d,r,c,u,m,p,g,b,f,C,S,k,U,D,F,A,R,O,X,q;await(null===e||void 0===e||null===(n=e.currentUser)||void 0===n?void 0:n.refreshAccessToken());const l="form",T=await(null===e||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.callFunction(l));v(null===(i=T[0])||void 0===i||null===(s=i.public)||void 0===s||null===(a=s.input)||void 0===a||null===(d=a.jsonData)||void 0===d||null===(r=d.products)||void 0===r?void 0:r.length),o(null===(c=T[0])||void 0===c||null===(u=c.public)||void 0===u||null===(m=u.input)||void 0===m?void 0:m.jsonData),h(null===(p=T[0])||void 0===p||null===(g=p.public)||void 0===g||null===(b=g.input)||void 0===b?void 0:b.jsonSchema),x(null===(f=T[0])||void 0===f||null===(C=f.public)||void 0===C||null===(S=C.input)||void 0===S?void 0:S.uiSchema),y(null===(k=T[0])||void 0===k||null===(U=k.public)||void 0===U||null===(D=U.output)||void 0===D?void 0:D.jsonSchema),w(null===(F=T[0])||void 0===F||null===(A=F.public)||void 0===A||null===(R=A.output)||void 0===R?void 0:R.uiSchema),j(null===(O=T[0])||void 0===O||null===(X=O.public)||void 0===X||null===(q=X.output)||void 0===q?void 0:q.jsonData),N(!1)}else T("/inan-rjsf/login")}catch(E){console.error("Error fetching products:",E),N(!1)}},O=async()=>{console.log("add"),R()},X=async()=>{console.log("remove"),R()};return(0,d.jsxs)(d.Fragment,{children:[C?(0,d.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,d.jsx)("div",{className:"text-gray-600 text-lg",children:"Loading..."})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsx)(i.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",formData:l,validator:s.Ay,schema:m,uiSchema:p,onSubmit:async l=>{var o;let{formData:n}=l;const t=[null===e||void 0===e||null===(o=e.currentUser)||void 0===o?void 0:o.id,null===n||void 0===n?void 0:n.products];try{var i;const l=await(null===(i=e.currentUser)||void 0===i?void 0:i.callFunction("updateCart",...t));null!==l&&void 0!==l&&l.message&&(k(!0),D(null===l||void 0===l?void 0:l.message),A(1)),R()}catch(s){const e=s.error;k(!0),D(e)}},onChange:async l=>{let{formData:o}=l;try{var n,t;const l=[null===e||void 0===e||null===(n=e.currentUser)||void 0===n?void 0:n.id,null===o||void 0===o?void 0:o.products];await(null===e||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.callFunction("updateCart",...l))}catch(i){console.log(i)}},templates:{ArrayFieldTemplate:e=>(0,d.jsx)(c,{...e,handleClick:O,onReorderClick:(e,l)=>console.log("Reordering item:",e,l),handleRemove:X})}})}),0!==(null===g||void 0===g?void 0:g.totalValue)&&(0,d.jsx)("div",{className:"flex justify-center mt-8",children:(0,d.jsx)(i.Ay,{className:"w-full max-w-md p-8 bg-white rounded-lg shadow-lg",validator:s.Ay,schema:b,uiSchema:f,formData:g,onSubmit:async()=>{var l;const o=await e.currentUser.refreshCustomData(),n=[null===e||void 0===e||null===(l=e.currentUser)||void 0===l?void 0:l.customData,null===o||void 0===o?void 0:o.cart];try{var t;const l=await(null===e||void 0===e||null===(t=e.currentUser)||void 0===t?void 0:t.callFunction("ToTempCart",...n));k(!0),D(null===l||void 0===l?void 0:l.message),A(0),R()}catch(i){alert(i.error),D(i.error),k(!0)}}})})]}),(0,d.jsx)("div",{children:(0,d.jsx)(r,{isOpen:S,onClose:()=>{k(!1)},message:U,array:F})})]})}}}]);
//# sourceMappingURL=243.124da6f2.chunk.js.map